# 视频自动生成系统

## 📌 功能概述

### 核心功能

- **智能视频拼接**  
  根据音频时长自动选择视频片段，精确匹配总时长
- **动态裁剪机制**  
  自动调整最后一个视频片段的时长
- **批量生成支持**  
  单次运行可生成多个随机组合版本（默认5个）

### 辅助功能

- **自动清理系统**  
  每次运行前自动清空输出目录
- **异常文件处理**  
  跳过损坏文件并记录日志
- **临时文件管理**  
  独立临时工作区 + 自动清理
- **进度可视化**  
  实时显示生成进度和关键指标

## 📂 目录结构

``` bash
├── video/ # [输入] 原始视频片段
│ ├── clip_001.mp4 # 视频文件 (960x1080)
│ └── ... # 支持格式: .mp4/.mov/.avi/.mkv
│
├── mp3/ # [输入] 音频文件
│ ├── background_1.mp3 # 背景音乐
│ └── ... # 支持格式: .mp3
│
├── output/ # [输出] 生成结果
│ ├── output_1.mp4 # 输出文件
│ └── ... # 命名格式: output_序号.mp4
│
├── generate_videos.py # 主程序
├── run.bat # Windows启动脚本
└── README.md # 本说明文件
```

## 🛠️ 使用说明

### 环境准备

1. **安装FFmpeg** (必须)

```bash
# Windows (管理员模式运行)(也可以自行官网下载安装，添加环境变量中)
choco install ffmpeg

# macOS
brew install ffmpeg

sudo apt install ffmpeg

# CentOS/RHEL
sudo yum install ffmpeg ffmpeg-devel
```

2. 准备媒体文件

- 将视频片段放入 **video/** 目录

- 将音频文件放入 **mp3/** 目录

### 运行程序

1. **Windows**：双击 `run.bat` 文件即可运行
   
2. **Linux/macOS**：运行 `generate_videos.py` 脚本

   
```bash
python generate_videos.py
```

### 输出结果

  - 生成视频保存至 **output/** 目录

  - 控制台显示详细运行日志

### ⚠️ 注意事项

1. 文件规范

  - 视频文件命名：clip_xxx.mp4

  - 音频文件命名：music_xxx.mp3

  - 避免使用特殊字符和空格

2. 硬件建议

  - 内存：≥4GB

  - 存储：推荐SSD硬盘

  - 处理器：支持硬件编解码

3. 异常处理

  - 生成失败的任务会显示临时目录路径

  - 损坏文件自动跳过并记录日志

  - 性能优化

  - 单个视频片段建议时长：15-60秒

  - 推荐音频时长：≤10分钟

  - 最佳视频片段数量：20-50个

### 📄 许可协议

```
MIT License
Copyright (c) 2023 [Your Name]

允许自由使用、修改和分发本软件及相关文档文件，但须保留原始版权声明。
禁止使用本软件用于任何非法用途，作者不承担由此产生的任何法律责任。
```