# 视频自动生成系统

## 🌟 核心功能

- **🎬 智能视频拼接**  
  `根据音频时长自动选择视频片段，精确匹配总时长`
- **✂️ 动态裁剪机制**  
  `自动调整最后一个视频片段的时长`
- **🎲 随机批量生成**  
  `单次运行可生成多个随机组合版本（默认5个）`

## ⚙️ 辅助功能

- **🧹 自动清理系统**  
  `每次运行前自动清空输出目录`
- **🛡️ 异常文件处理**  
  `跳过损坏文件并记录日志 | 错误重试机制`
- **📂 临时文件管理**  
  `独立临时工作区 + 自动清理 | 防残留设计`
- **📊 进度可视化**  
  `实时生成进度 | 耗时统计 | 资源用量提示`

## 📂 目录结构

``` bash
├── video/ # [输入] 原始视频片段
│ ├── clip_001.mp4 # 视频文件 (960x1080)
│ └── ... # 支持格式: .mp4/.mov/.avi/.mkv
│
├── mp3/ # [输入] 音频文件
│ ├── background_1.mp3 # 背景音乐
│ └── ... # 支持格式: .mp3
│
├── output/ # [输出] 生成结果
│ ├── output_1.mp4 # 输出文件
│ └── ... # 命名格式: output_序号.mp4
│
├── generate_videos.py # 主程序
├── run.bat # Windows启动脚本
└── README.md # 本说明文件
```

## 🚀 使用说明

### 环境准备

1. **安装FFmpeg** (必须)

```bash
# Windows (管理员模式运行)(也可以自行官网下载安装，添加环境变量中)
choco install ffmpeg

# macOS
brew install ffmpeg

sudo apt install ffmpeg

# CentOS/RHEL
sudo yum install ffmpeg ffmpeg-devel
```

2. 准备媒体文件

- 将视频片段放入 **video/** 目录

- 将音频文件放入 **mp3/** 目录

### 运行程序

1. **Windows**：双击 `run.bat` 文件即可运行
   
2. **Linux/macOS**：运行 `generate_videos.py` 脚本

   
```bash
python generate_videos.py
```

### 输出结果

- 生成视频保存至 **output/** 目录

- 控制台显示详细运行日志

### ⚠️ 注意事项

1. 📝 文件规范

- 🔠 文件名避免中文/特殊符号

- ⏱️ 单个视频建议 ≤5分钟

- 🔊 音频文件建议 ≤30分钟

2. 💻 硬件要求

- 🧠 内存：≥4GB

- 💾 存储：预留2倍输出空间

- 🚀 推荐SSD硬盘

3. 🛠️ 异常处理

- 🔍 错误时检查控制台日志

- 🗑️ 临时文件前缀为 temp_

- ⏩ 损坏文件自动跳过

4. 🚀 性能提示

- 🐢 首次运行较慢属正常

- 🎞️ 推荐50-100个视频片段

- 🚫 关闭其他大型软件

### 📄 许可协议

``` bash
MIT License
Copyright (c) 2023 [Your Name]

✅ 允许：自由使用/修改/分发  
❌ 禁止：用于非法用途  
⚠️ 免责：作者不承担使用后果

```